{{ define "main" }}
  <section class="home-hero">
    <h1 class="home-hero-title">Каталог AI‑инструментов</h1>
    <p class="home-hero-desc">Модели, IDE, skills, статьи и MCP — для вайбкодеров и их агентов.</p>
  </section>

  {{ $recent := (where .Site.RegularPages "Draft" false).ByLastmod.Reverse | first 3 }}
  {{ if $recent }}
  <p class="home-section-label">Последние обновления</p>
  {{ with index $recent 0 }}
    <a href="{{ .RelPermalink }}" class="featured-card">
      <span class="featured-label">Свежее</span>
      <span class="featured-title">{{ .Title }}</span>
      <span class="featured-desc">{{ .Description }}</span>
      <div class="featured-meta">
        {{ with .Params.provider }}<span>{{ . }}</span><span class="sep">·</span>{{ end }}
        <span>{{ .Lastmod.Format "02.01.2006" }}</span>
        <span class="sep">·</span>
        <span class="section-tag">{{ .Section }}</span>
      </div>
    </a>
  {{ end }}
  {{ if gt (len $recent) 1 }}
  <div class="small-cards">
    {{ range after 1 $recent }}
    <a href="{{ .RelPermalink }}" class="small-card">
      <span class="small-card-title">{{ .Title }}</span>
      <span class="small-card-desc">{{ .Description }}</span>
      <div class="small-card-meta">
        {{ with .Params.provider }}<span>{{ . }}</span><span class="sep">·</span>{{ end }}
        <span>{{ .Lastmod.Format "02.01.2006" }}</span>
        <span class="sep">·</span>
        <span class="section-tag">{{ .Section }}</span>
      </div>
    </a>
    {{ end }}
  </div>
  {{ end }}
  {{ end }}

  <p class="home-section-label">Разделы</p>
  <div class="home-grid">
    {{ $models := where .Site.RegularPages "Section" "models" }}
    <a href="/models/" class="home-card">
      <div class="home-card-title">Модели</div>
      <div class="home-card-count">{{ len $models }} модели</div>
      <div class="home-card-desc">Claude, GPT, Gemini, DeepSeek — сравнение возможностей и цен</div>
    </a>
    {{ $tools := where .Site.RegularPages "Section" "tools" }}
    <a href="/tools/" class="home-card">
      <div class="home-card-title">Инструменты</div>
      <div class="home-card-count">{{ len $tools }} инструментов</div>
      <div class="home-card-desc">IDE и платформы для вайбкодинга: Cursor, Claude Code, Bolt, Lovable</div>
    </a>
    {{ $skills := where .Site.RegularPages "Section" "skills" }}
    <a href="/skills/" class="home-card">
      <div class="home-card-title">Skills</div>
      <div class="home-card-count">{{ len $skills }} {{ cond (ge (len $skills) 5) "скиллов" (cond (eq (len $skills) 1) "скилл" "скилла") }}</div>
      <div class="home-card-desc">Кастомные навыки для Claude Code и других AI-агентов</div>
    </a>
    {{ $guides := where .Site.RegularPages "Section" "guides" }}
    <a href="/guides/" class="home-card">
      <div class="home-card-title">Гайды</div>
      <div class="home-card-count">{{ len $guides }} {{ cond (ge (len $guides) 5) "гайдов" (cond (eq (len $guides) 1) "гайд" "гайда") }}</div>
      <div class="home-card-desc">Промпт-инжиниринг, управление контекстом, AI pair programming</div>
    </a>
    {{ $concepts := where .Site.RegularPages "Section" "concepts" }}
    <a href="/concepts/" class="home-card">
      <div class="home-card-title">Концепции</div>
      <div class="home-card-count">{{ len $concepts }} {{ cond (ge (len $concepts) 5) "концепций" (cond (eq (len $concepts) 1) "концепция" "концепции") }}</div>
      <div class="home-card-desc">Фундаментальные понятия: агенты, RAG, контекстное окно, MCP</div>
    </a>
    {{ $mcp := where .Site.RegularPages "Section" "mcp" }}
    <a href="/mcp/" class="home-card">
      <div class="home-card-title">MCP</div>
      <div class="home-card-count">{{ len $mcp }} серверов</div>
      <div class="home-card-desc">Model Context Protocol серверы: GitHub, Playwright, PostgreSQL</div>
    </a>
  </div>
{{ end }}
